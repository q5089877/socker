name: Neilçš„å°è‚¡è‡ªå‹•æ›´æ–°

on:
  schedule:
    - cron: '0 6 * * *'    # æ¯å¤© UTC 06:00 â†’ å°ç£ 14:00
  workflow_dispatch:

# ğŸ“Œ æ˜¾å¼å¼€å¯å†™æƒé™ï¼Œå¦åˆ™ GITHUB_TOKEN é»˜è®¤å¯èƒ½åªæœ‰è¯»
permissions:
  contents: write

jobs:
  update-and-commit:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repo
      uses: actions/checkout@v4
      with:
        # persist-credentials: true æœƒä¿ç•™ GITHUB_TOKEN åˆ° .git/configï¼Œ
        # è®“å¾ŒçºŒ git push origin main å°±èƒ½ç”¨åŒä¸€æ”¯ token è‡ªå‹•èªè­‰
        persist-credentials: true

    - name: Setup Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'

    - name: Install deps
      run: |
        pip install --upgrade pip
        pip install -r requirements.txt

    #- name: Update data
    #  run: python update.py

    - name: Commit & Push
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      run: |
        git config user.email "q5089877@gmail.com"
        git config user.name "neil.wang"
        git add stock_report.html
        git commit --allow-empty -m "chore: å®šæ™‚æ›´æ–°è‚¡åƒ¹å ±è¡¨"
        git push origin main
